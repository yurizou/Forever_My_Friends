<h2>スケジュール編集</h2>

<%= link_to "削除", plan_path(@plan.id), method: :delete %>

<%= form_with model: @plan, url: plan_path, method: :patch do |f| %>
  <%= f.label :タイトル %>
  <%= f.text_field :title %>

  <%= f.label :日程 %>
  <%= f.datetime_field :sample_at %>

  <%= f.label :場所 %>
  <%= f.text_field :place %>

  <div id='map'></div>

  <style>
    #map {
      height: 400px;
      width: 400px;
    }
  </style>

  <script>
    let map

    function initMap(){
      geocoder = new google.maps.Geocoder()

      map = new google.maps.Map(document.getElementById('map'), {
        center: {lat: 34.6650617, lng:135.4961973},
        zoom: 12,
      });

      marker = new google.maps.Marker({
        position:  {lat: 34.6650617, lng:135.4961973},
        map: map
      });
    }
  </script>

  <script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_API_KEY'] %>&callback=initMap" async defer></script>


  <%= f.label :メモ %>
  <%= f.text_field :memo %>

  <%= f.label :ステータス %>
  <%= f.select :status, Plan.statuses.keys.map {|k| [I18n.t("enums.plan.status.#{k}"), k]}  %>

  <%= f.submit "編集内容を保存" %>

  
  <% end %>